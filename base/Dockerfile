FROM python:2-slim

EXPOSE 5000

RUN useradd --create-home redash

# Ubuntu packages
RUN apt-get update && \
  apt-get install -y curl gnupg && \
  curl https://deb.nodesource.com/setup_6.x | bash - && \
  apt-get install -y \
    build-essential \
    pwgen \
    libffi-dev \
    sudo \
    git-core \
    wget \
    nodejs \
    # Postgres client
    libpq-dev \
    # for SAML
    xmlsec1 \
    # Additional packages required for data sources:
    libssl-dev \
    default-libmysqlclient-dev \
    freetds-dev \
    libsasl2-dev && \
  apt-get clean && \
  rm -rf /var/lib/apt/lists/*

WORKDIR /app
